{"ast":null,"code":"import _objectSpread from\"/var/www/capstone/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/var/www/capstone/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/var/www/capstone/node_modules/@babel/runtime/regenerator/index.js\";//firebase account: shappovala@gmail.com\nimport{initializeApp}from'firebase/app';import{getAuth,signInWithRedirect,signInWithPopup,GoogleAuthProvider,createUserWithEmailAndPassword,signInWithEmailAndPassword,signOut,onAuthStateChanged}from'firebase/auth';import{getFirestore,doc,getDoc,setDoc,collection,writeBatch,query,getDocs}from'firebase/firestore';// Your web app's Firebase configuration\nvar firebaseConfig={apiKey:\"AIzaSyA1D434m3xoFS8NJJ3xOpoe-HfgIUdJ5_0\",authDomain:\"capstone-f7203.firebaseapp.com\",projectId:\"capstone-f7203\",storageBucket:\"capstone-f7203.appspot.com\",messagingSenderId:\"770752780969\",appId:\"1:770752780969:web:eb06844e9c24dadbcc67b8\"};// Initialize Firebase\nvar firebaseApp=initializeApp(firebaseConfig);var googleProvider=new GoogleAuthProvider();googleProvider.setCustomParameters({prompt:'select_account'});export var auth=getAuth();export var signInWithGooglePopup=function signInWithGooglePopup(){return signInWithPopup(auth,googleProvider);};export var signInWithGoogleRedirect=function signInWithGoogleRedirect(){return signInWithRedirect(auth,googleProvider);};export var db=getFirestore();export var addCollectionAndDocuments=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(collectionKey,objectsToAdd,field){var collectionRef,batch;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:collectionRef=collection(db,collectionKey);batch=writeBatch(db);objectsToAdd.forEach(function(object){var docRef=doc(collectionRef,object.title.toLowerCase());batch.set(docRef,object);});_context.next=5;return batch.commit();case 5:case\"end\":return _context.stop();}}},_callee);}));return function addCollectionAndDocuments(_x,_x2,_x3){return _ref.apply(this,arguments);};}();export var getCategoriesAndDocuments=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var collectionRef,q,querySnapshot,categoryMap;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:collectionRef=collection(db,'categories');q=query(collectionRef);_context2.next=4;return getDocs(q);case 4:querySnapshot=_context2.sent;categoryMap=querySnapshot.docs.reduce(function(acc,docSnapshot){var _docSnapshot$data=docSnapshot.data(),title=_docSnapshot$data.title,items=_docSnapshot$data.items;acc[title.toLowerCase()]=items;return acc;},{});return _context2.abrupt(\"return\",categoryMap);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function getCategoriesAndDocuments(){return _ref2.apply(this,arguments);};}();export var createUserDocumentfromAuth=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(userAuth){var additionalInformation,userDocRef,userSnapshot,displayName,email,createdAt,_args3=arguments;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:additionalInformation=_args3.length>1&&_args3[1]!==undefined?_args3[1]:{};if(userAuth){_context3.next=3;break;}return _context3.abrupt(\"return\");case 3:userDocRef=doc(db,'users',userAuth.uid);_context3.next=6;return getDoc(userDocRef);case 6:userSnapshot=_context3.sent;if(userSnapshot.exists()){_context3.next=18;break;}displayName=userAuth.displayName,email=userAuth.email;createdAt=new Date();_context3.prev=10;_context3.next=13;return setDoc(userDocRef,_objectSpread({displayName:displayName,email:email,createdAt:createdAt},additionalInformation));case 13:_context3.next=18;break;case 15:_context3.prev=15;_context3.t0=_context3[\"catch\"](10);console.log('error creating the user',_context3.t0.message);case 18:return _context3.abrupt(\"return\",userDocRef);case 19:case\"end\":return _context3.stop();}}},_callee3,null,[[10,15]]);}));return function createUserDocumentfromAuth(_x4){return _ref3.apply(this,arguments);};}();export var createAuthUserWithEmailAndPassword=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(email,password){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(!email||!password)){_context4.next=2;break;}return _context4.abrupt(\"return\");case 2:_context4.next=4;return createUserWithEmailAndPassword(auth,email,password);case 4:return _context4.abrupt(\"return\",_context4.sent);case 5:case\"end\":return _context4.stop();}}},_callee4);}));return function createAuthUserWithEmailAndPassword(_x5,_x6){return _ref4.apply(this,arguments);};}();export var signInAuthUserWithEmailAndPassword=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(email,password){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!(!email||!password)){_context5.next=2;break;}return _context5.abrupt(\"return\");case 2:_context5.next=4;return signInWithEmailAndPassword(auth,email,password);case 4:return _context5.abrupt(\"return\",_context5.sent);case 5:case\"end\":return _context5.stop();}}},_callee5);}));return function signInAuthUserWithEmailAndPassword(_x7,_x8){return _ref5.apply(this,arguments);};}();export var signOutUser=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return signOut(auth);case 2:return _context6.abrupt(\"return\",_context6.sent);case 3:case\"end\":return _context6.stop();}}},_callee6);}));return function signOutUser(){return _ref6.apply(this,arguments);};}();export var onAuthStateChangedListener=function onAuthStateChangedListener(callback){onAuthStateChanged(auth,callback);};","map":{"version":3,"sources":["/var/www/capstone/src/utils/firebase/firebase.utils.js"],"names":["initializeApp","getAuth","signInWithRedirect","signInWithPopup","GoogleAuthProvider","createUserWithEmailAndPassword","signInWithEmailAndPassword","signOut","onAuthStateChanged","getFirestore","doc","getDoc","setDoc","collection","writeBatch","query","getDocs","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","firebaseApp","googleProvider","setCustomParameters","prompt","auth","signInWithGooglePopup","signInWithGoogleRedirect","db","addCollectionAndDocuments","collectionKey","objectsToAdd","field","collectionRef","batch","forEach","object","docRef","title","toLowerCase","set","commit","getCategoriesAndDocuments","q","querySnapshot","categoryMap","docs","reduce","acc","docSnapshot","data","items","createUserDocumentfromAuth","userAuth","additionalInformation","userDocRef","uid","userSnapshot","exists","displayName","email","createdAt","Date","console","log","message","createAuthUserWithEmailAndPassword","password","signInAuthUserWithEmailAndPassword","signOutUser","onAuthStateChangedListener","callback"],"mappings":"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","sourcesContent":["//firebase account: shappovala@gmail.com\nimport {initializeApp} from 'firebase/app';\nimport {\n  getAuth, \n  signInWithRedirect, \n  signInWithPopup, \n  GoogleAuthProvider, \n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n  signOut,\n  onAuthStateChanged,\n} from 'firebase/auth';\nimport {\n    getFirestore, \n    doc, \n    getDoc, \n    setDoc, \n    collection,\n    writeBatch, \n    query,\n    getDocs\n  } from 'firebase/firestore';\n\n\n// Your web app's Firebase configuration\nconst firebaseConfig = {\n    apiKey: \"AIzaSyA1D434m3xoFS8NJJ3xOpoe-HfgIUdJ5_0\",\n    authDomain: \"capstone-f7203.firebaseapp.com\",\n    projectId: \"capstone-f7203\",\n    storageBucket: \"capstone-f7203.appspot.com\",\n    messagingSenderId: \"770752780969\",\n    appId: \"1:770752780969:web:eb06844e9c24dadbcc67b8\"\n  };\n  \n  // Initialize Firebase\n  const firebaseApp = initializeApp(firebaseConfig);\n\n  const googleProvider = new GoogleAuthProvider();\n  googleProvider.setCustomParameters({\n      prompt: 'select_account'\n  });\n\n\n  export const auth = getAuth();\n  export const signInWithGooglePopup = () => signInWithPopup(auth, googleProvider);\n  export const signInWithGoogleRedirect = () => signInWithRedirect(auth, googleProvider);\n\n\n  export const db = getFirestore();\n\n  export const addCollectionAndDocuments = async (\n    collectionKey, \n    objectsToAdd,\n    field\n    ) => {\n    const collectionRef = collection(db, collectionKey);\n    const batch = writeBatch(db);\n\n    objectsToAdd.forEach((object) => {\n      const docRef = doc(collectionRef, object.title.toLowerCase());\n      batch.set(docRef, object);\n    });\n\n    await batch.commit();\n\n  }\n\n  export const getCategoriesAndDocuments =  async() => {\n    const collectionRef = collection(db, 'categories');\n    const q = query(collectionRef);\n\n    const querySnapshot = await getDocs(q);\n    const categoryMap = querySnapshot.docs.reduce((acc, docSnapshot)=> {\n      const {title, items} = docSnapshot.data();\n      acc[title.toLowerCase()] = items;\n      return acc;\n    }, {})\n\n    return categoryMap;\n\n\n\n  }\n\n\n  export const createUserDocumentfromAuth = async(\n    userAuth, \n    additionalInformation={}\n    ) => {\n\n      if (!userAuth) return;\n\n      const userDocRef = doc(db, 'users', userAuth.uid);\n\n      const userSnapshot = await getDoc(userDocRef);\n\n      if (!userSnapshot.exists()) {\n          const {displayName, email} = userAuth;\n          const createdAt = new Date();\n\n          try {\n            await setDoc(userDocRef, {\n                displayName,\n                email,\n                createdAt,\n                ...additionalInformation\n            });\n          } catch (error) {\n            console.log('error creating the user' , error.message);\n          }\n\n      }\n\n\n      return userDocRef;\n\n\n\n  };\n\n\n  export const createAuthUserWithEmailAndPassword = async(email, password) => {\n    if (!email || !password) return;\n    return await createUserWithEmailAndPassword(auth, email, password);\n  }\n\n  export const signInAuthUserWithEmailAndPassword = async(email, password) => {\n    if (!email || !password) return;\n    return await signInWithEmailAndPassword(auth, email, password);\n  }\n\n  export const signOutUser = async () => await signOut(auth);\n\n  export const onAuthStateChangedListener = (callback) => {\n    \n\n    onAuthStateChanged(auth, callback);\n  } \n"]},"metadata":{},"sourceType":"module"}